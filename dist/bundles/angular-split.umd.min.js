!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-split",["exports","@angular/core","rxjs","rxjs/operators","@angular/common"],t):t(e["angular-split"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.ng.common)}(this,function(e,n,s,o,t){"use strict";function i(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,s=i.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(r=s.next()).done;)o.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=s["return"])&&i.call(s)}finally{if(n)throw n.error}}return o}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var r=function(){function e(e,t,i,r){this.ngZone=e,this.elRef=t,this.cdRef=i,this.renderer=r,this._direction="horizontal",this._useTransition=!1,this._disabled=!1,this._useBackground=!0,this._width=null,this._height=null,this._gutterSize=11,this._gutterColor="",this._gutterImageH="",this._gutterImageV="",this._dir="ltr",this.dragStart=new n.EventEmitter(!1),this.dragProgress=new n.EventEmitter(!1),this.dragEnd=new n.EventEmitter(!1),this.gutterClick=new n.EventEmitter(!1),this.transitionEndInternal=new s.Subject,this.transitionEnd=this.transitionEndInternal.asObservable().pipe(o.debounceTime(20)),this.isViewInitialized=!1,this.isDragging=!1,this.draggingWithoutMove=!1,this.currentGutterNum=0,this.displayedAreas=[],this.hidedAreas=[],this.dragListeners=[],this.dragStartValues={sizePixelContainer:0,sizePixelA:0,sizePixelB:0,sizePercentA:0,sizePercentB:0}}return Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){var t=this;e="vertical"===e?"vertical":"horizontal",this._direction=e,a(this.displayedAreas,this.hidedAreas).forEach(function(e){e.comp.setStyleVisibleAndDir(e.comp.visible,t.isDragging,t.direction)}),this.build(!1,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useTransition",{get:function(){return this._useTransition},set:function(e){e="boolean"==typeof e?e:"false"!==e,this._useTransition=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){e="boolean"==typeof e?e:"false"!==e,this._disabled=e,this.cdRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBackground",{get:function(){return this._useBackground},set:function(e){e="boolean"==typeof e?e:"false"!==e,this._useBackground=e,this.cdRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){e=Number(e),this._width=!isNaN(e)&&0<e?e:null,this.build(!1,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){e=Number(e),this._height=!isNaN(e)&&0<e?e:null,this.build(!1,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gutterSize",{get:function(){return this._gutterSize},set:function(e){e=Number(e),this._gutterSize=!isNaN(e)&&0<e?e:11,this.build(!1,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gutterColor",{get:function(){return this._gutterColor},set:function(e){this._gutterColor="string"==typeof e&&""!==e?e:"",this.cdRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gutterImageH",{get:function(){return this._gutterImageH},set:function(e){this._gutterImageH="string"==typeof e&&""!==e?e:"",this.cdRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gutterImageV",{get:function(){return this._gutterImageV},set:function(e){this._gutterImageV="string"==typeof e&&""!==e?e:"",this.cdRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},set:function(e){e="rtl"===e?"rtl":"ltr",this._dir=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssFlexdirection",{get:function(){return"horizontal"===this.direction?"row":"column"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssWidth",{get:function(){return this.width?this.width+"px":"100%"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssHeight",{get:function(){return this.height?this.height+"px":"100%"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssMinwidth",{get:function(){return"horizontal"===this.direction?this.getNbGutters()*this.gutterSize+"px":null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssMinheight",{get:function(){return"vertical"===this.direction?this.getNbGutters()*this.gutterSize+"px":null},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.isViewInitialized=!0},e.prototype.getNbGutters=function(){return this.displayedAreas.length-1},e.prototype.addArea=function(e){var t={comp:e,order:0,size:0};!0===e.visible?this.displayedAreas.push(t):this.hidedAreas.push(t),e.setStyleVisibleAndDir(e.visible,this.isDragging,this.direction),this.build(!0,!0)},e.prototype.removeArea=function(t){if(this.displayedAreas.some(function(e){return e.comp===t})){var e=this.displayedAreas.find(function(e){return e.comp===t});this.displayedAreas.splice(this.displayedAreas.indexOf(e),1),this.build(!0,!0)}else if(this.hidedAreas.some(function(e){return e.comp===t})){e=this.hidedAreas.find(function(e){return e.comp===t});this.hidedAreas.splice(this.hidedAreas.indexOf(e),1)}},e.prototype.updateArea=function(t,e,i){this.displayedAreas.find(function(e){return e.comp===t})&&this.build(e,i)},e.prototype.showArea=function(t){var e,i=this.hidedAreas.find(function(e){return e.comp===t});if(i){t.setStyleVisibleAndDir(t.visible,this.isDragging,this.direction);var r=this.hidedAreas.splice(this.hidedAreas.indexOf(i),1);(e=this.displayedAreas).push.apply(e,a(r)),this.build(!0,!0)}},e.prototype.hideArea=function(t){var e,i=this.displayedAreas.find(function(e){return e.comp===t});if(i){t.setStyleVisibleAndDir(t.visible,this.isDragging,this.direction);var r=this.displayedAreas.splice(this.displayedAreas.indexOf(i),1);r.forEach(function(e){e.order=0,e.size=0}),(e=this.hidedAreas).push.apply(e,a(r)),this.build(!0,!0)}},e.prototype.build=function(e,t){var i=this;if(this.stopDragging(),!0===e&&(this.displayedAreas.every(function(e){return null!==e.comp.order})&&this.displayedAreas.sort(function(e,t){return e.comp.order-t.comp.order}),this.displayedAreas.forEach(function(e,t){e.order=2*t,e.comp.setStyleOrder(e.order)})),!0===t){var r=this.displayedAreas.reduce(function(e,t){return t.comp.size?e+t.comp.size:e},0);if(this.displayedAreas.every(function(e){return null!==e.comp.size})&&.999<r&&r<1.001)this.displayedAreas.forEach(function(e){e.size=e.comp.size});else{var n=1/this.displayedAreas.length;this.displayedAreas.forEach(function(e){e.size=n})}}var s=0,o=this.getNbGutters()*this.gutterSize;if(o="horizontal"===this.direction?this.width?this.width:this.elRef.nativeElement.offsetWidth:this.height?this.height:this.elRef.nativeElement.offsetHeight,this.displayedAreas.forEach(function(e){e.size*o<i.gutterSize&&(s+=e.size,e.size=0)}),0<s&&0<this.displayedAreas.length){var a=this.displayedAreas.filter(function(e){return 0!==e.size}).length;if(0<a){var u=s/a;this.displayedAreas.filter(function(e){return 0!==e.size}).forEach(function(e){e.size+=u})}else this.displayedAreas[this.displayedAreas.length-1].size=1}this.refreshStyleSizes(),this.cdRef.markForCheck()},e.prototype.refreshStyleSizes=function(){var t=this,i=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(function(e){e.comp.setStyleFlexbasis("calc( "+100*e.size+"% - "+e.size*i+"px )",t.isDragging)})},e.prototype.startDragging=function(e,t,i){var r=this;if(e.preventDefault(),this.currentGutterNum=i,this.draggingWithoutMove=!0,this.ngZone.runOutsideAngular(function(){r.dragListeners.push(r.renderer.listen("document","mouseup",function(e){return r.stopDragging()})),r.dragListeners.push(r.renderer.listen("document","touchend",function(e){return r.stopDragging()})),r.dragListeners.push(r.renderer.listen("document","touchcancel",function(e){return r.stopDragging()}))}),!this.disabled){var n=this.displayedAreas.find(function(e){return e.order===t-1}),s=this.displayedAreas.find(function(e){return e.order===t+1});if(n&&s){var o="horizontal"===this.direction?"offsetWidth":"offsetHeight";this.dragStartValues.sizePixelContainer=this.elRef.nativeElement[o],this.dragStartValues.sizePixelA=n.comp.getSizePixel(o),this.dragStartValues.sizePixelB=s.comp.getSizePixel(o),this.dragStartValues.sizePercentA=n.size,this.dragStartValues.sizePercentB=s.size;var a=this.getPointFromEvent(e);a&&(this.ngZone.runOutsideAngular(function(){r.dragListeners.push(r.renderer.listen("document","mousemove",function(e){return r.dragEvent(e,a,n,s)})),r.dragListeners.push(r.renderer.listen("document","touchmove",function(e){return r.dragEvent(e,a,n,s)}))}),n.comp.lockEvents(),s.comp.lockEvents(),this.isDragging=!0,this.notify("start"))}}},e.prototype.dragEvent=function(e,t,i,r){if(this.isDragging){var n=this.getPointFromEvent(e);n&&(this.draggingWithoutMove=!1,this.drag(t,n,i,r))}},e.prototype.getPointFromEvent=function(e){return e instanceof TouchEvent?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.pageX!==undefined&&e.pageY!==undefined?{x:e.pageX,y:e.pageY}:null},e.prototype.drag=function(e,t,i,r){var n="horizontal"===this.direction?e.x-t.x:e.y-t.y;n/=1,"rtl"===this.dir&&(n=-n);var s=this.dragStartValues.sizePixelA-n,o=this.dragStartValues.sizePixelB+n;s<this.gutterSize||o<this.gutterSize||(s<this.gutterSize?(o+=s,s=0):o<this.gutterSize&&(s+=o,o=0),0===s?(r.size+=i.size,i.size=0):0===o?(i.size+=r.size,r.size=0):0===this.dragStartValues.sizePercentA?(r.size=this.dragStartValues.sizePercentB/this.dragStartValues.sizePixelB*o,i.size=this.dragStartValues.sizePercentB-r.size):0===this.dragStartValues.sizePercentB?(i.size=this.dragStartValues.sizePercentA/this.dragStartValues.sizePixelA*s,r.size=this.dragStartValues.sizePercentA-i.size):(i.size=this.dragStartValues.sizePercentA/this.dragStartValues.sizePixelA*s,r.size=this.dragStartValues.sizePercentA+this.dragStartValues.sizePercentB-i.size),this.refreshStyleSizes(),this.notify("progress"))},e.prototype.stopDragging=function(){if(!1!==this.isDragging||!1!==this.draggingWithoutMove){for(this.displayedAreas.forEach(function(e){e.comp.unlockEvents()});0<this.dragListeners.length;){var e=this.dragListeners.pop();e&&e()}!0===this.draggingWithoutMove?this.notify("click"):this.notify("end"),this.isDragging=!1,this.draggingWithoutMove=!1}},e.prototype.notify=function(e){var t=this,i=this.displayedAreas.map(function(e){return 100*e.size});this.ngZone.run(function(){switch(e){case"start":return t.dragStart.emit({gutterNum:t.currentGutterNum,sizes:i});case"progress":return t.dragProgress.emit({gutterNum:t.currentGutterNum,sizes:i});case"end":return t.dragEnd.emit({gutterNum:t.currentGutterNum,sizes:i});case"click":return t.gutterClick.emit({gutterNum:t.currentGutterNum,sizes:i});case"transitionEnd":return t.transitionEndInternal.next(i)}})},e.prototype.ngOnDestroy=function(){this.stopDragging()},e.decorators=[{type:n.Component,args:[{selector:"as-split",changeDetection:n.ChangeDetectionStrategy.OnPush,template:'\n        <ng-content></ng-content>\n        <ng-template ngFor let-area [ngForOf]="displayedAreas" let-index="index" let-last="last">\n            <as-split-gutter *ngIf="last === false" \n                          [order]="index*2+1"\n                          [direction]="direction"\n                          [useTransition]="useTransition"\n                          [size]="gutterSize"\n                          [color]="gutterColor"\n                          [useBackground]="useBackground"\n                          [imageH]="gutterImageH"\n                          [imageV]="gutterImageV"\n                          [disabled]="disabled"\n                          (mousedown)="startDragging($event, index*2+1, index+1)"\n                          (touchstart)="startDragging($event, index*2+1, index+1)"></as-split-gutter>\n        </ng-template>',styles:[":host{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}as-split-gutter{flex-grow:0;flex-shrink:0;background-position:center center;background-repeat:no-repeat}"]}]}],e.ctorParameters=function(){return[{type:n.NgZone},{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:n.Renderer2}]},e.propDecorators={direction:[{type:n.Input}],useTransition:[{type:n.Input}],disabled:[{type:n.Input}],useBackground:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],gutterSize:[{type:n.Input}],gutterColor:[{type:n.Input}],gutterImageH:[{type:n.Input}],gutterImageV:[{type:n.Input}],dir:[{type:n.Input}],dragStart:[{type:n.Output}],dragProgress:[{type:n.Output}],dragEnd:[{type:n.Output}],gutterClick:[{type:n.Output}],transitionEnd:[{type:n.Output}],cssFlexdirection:[{type:n.HostBinding,args:["style.flex-direction"]}],cssWidth:[{type:n.HostBinding,args:["style.width"]}],cssHeight:[{type:n.HostBinding,args:["style.height"]}],cssMinwidth:[{type:n.HostBinding,args:["style.min-width"]}],cssMinheight:[{type:n.HostBinding,args:["style.min-height"]}]},e}(),u=function(){function e(e,t,i,r){this.ngZone=e,this.elRef=t,this.renderer=i,this.split=r,this._order=null,this._size=null,this._minSize=0,this._visible=!0,this.lockListeners=[]}return Object.defineProperty(e.prototype,"order",{get:function(){return this._order},set:function(e){e=Number(e),this._order=isNaN(e)?null:e,this.split.updateArea(this,!0,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){e=Number(e),this._size=!isNaN(e)&&0<=e&&e<=100?e/100:null,this.split.updateArea(this,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minSize",{get:function(){return this._minSize},set:function(e){e=Number(e),this._minSize=!isNaN(e)&&0<e&&e<100?e/100:0,this.split.updateArea(this,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){e="boolean"==typeof e?e:"false"!==e,this._visible=e,this.visible?this.split.showArea(this):this.split.hideArea(this)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.split.addArea(this),this.renderer.setStyle(this.elRef.nativeElement,"flex-grow","0"),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink","0"),this.ngZone.runOutsideAngular(function(){t.transitionListener=t.renderer.listen(t.elRef.nativeElement,"transitionend",function(e){return t.onTransitionEnd(e)})})},e.prototype.getSizePixel=function(e){return this.elRef.nativeElement[e]},e.prototype.setStyleVisibleAndDir=function(e,t,i){!1===e?(this.setStyleFlexbasis("0",t),this.renderer.setStyle(this.elRef.nativeElement,"overflow-x","hidden"),this.renderer.setStyle(this.elRef.nativeElement,"overflow-y","hidden"),"vertical"===i&&this.renderer.setStyle(this.elRef.nativeElement,"max-width","0")):(this.renderer.setStyle(this.elRef.nativeElement,"overflow-x","hidden"),this.renderer.setStyle(this.elRef.nativeElement,"overflow-y","auto"),this.renderer.removeStyle(this.elRef.nativeElement,"max-width")),"horizontal"===i?(this.renderer.setStyle(this.elRef.nativeElement,"height","100%"),this.renderer.removeStyle(this.elRef.nativeElement,"width")):(this.renderer.setStyle(this.elRef.nativeElement,"width","100%"),this.renderer.removeStyle(this.elRef.nativeElement,"height"))},e.prototype.setStyleOrder=function(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)},e.prototype.setStyleFlexbasis=function(e,t){!1===this.split.isViewInitialized||!0===t?this.setStyleTransition(!1):this.setStyleTransition(this.split.useTransition),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",e)},e.prototype.setStyleTransition=function(e){e?this.renderer.setStyle(this.elRef.nativeElement,"transition","flex-basis 0.3s"):this.renderer.removeStyle(this.elRef.nativeElement,"transition")},e.prototype.onTransitionEnd=function(e){"flex-basis"===e.propertyName&&this.split.notify("transitionEnd")},e.prototype.lockEvents=function(){var e=this;this.ngZone.runOutsideAngular(function(){e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"selectstart",function(e){return!1})),e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"dragstart",function(e){return!1}))})},e.prototype.unlockEvents=function(){for(;0<this.lockListeners.length;){var e=this.lockListeners.pop();e&&e()}},e.prototype.ngOnDestroy=function(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)},e.decorators=[{type:n.Directive,args:[{selector:"as-split-area"}]}],e.ctorParameters=function(){return[{type:n.NgZone},{type:n.ElementRef},{type:n.Renderer2},{type:r}]},e.propDecorators={order:[{type:n.Input}],size:[{type:n.Input}],minSize:[{type:n.Input}],visible:[{type:n.Input}]},e}(),l=function(){function e(e,t){this.elRef=e,this.renderer=t,this._useBackground=!0,this._disabled=!1}return Object.defineProperty(e.prototype,"order",{set:function(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e,this.refreshStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useTransition",{set:function(e){e?this.renderer.setStyle(this.elRef.nativeElement,"transition","flex-basis 0.3s"):this.renderer.removeStyle(this.elRef.nativeElement,"transition")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e,this.refreshStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this.refreshStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBackground",{set:function(e){this._useBackground=e,this.refreshStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageH",{get:function(){return this._imageH},set:function(e){this._imageH=e,this.refreshStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageV",{get:function(){return this._imageV},set:function(e){this._imageV=e,this.refreshStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,this.refreshStyle()},enumerable:!0,configurable:!0}),e.prototype.refreshStyle=function(){this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",this.size+"px"),this.renderer.setStyle(this.elRef.nativeElement,"height","vertical"===this.direction?this.size+"px":"100%"),this.renderer.setStyle(this.elRef.nativeElement,"background-color",""!==this.color?this.color:"#eeeeee");var e=!0===this.disabled?"disabled":this.direction;this.renderer.setStyle(this.elRef.nativeElement,"background-image",this.getImage(e)),this.renderer.setStyle(this.elRef.nativeElement,"cursor",this.getCursor(e))},e.prototype.getCursor=function(e){switch(e){case"horizontal":return"col-resize";case"vertical":return"row-resize";case"disabled":return"default"}},e.prototype.getImage=function(e){if(this._useBackground)switch(e){case"horizontal":return""!==this.imageH?this.imageH:h;case"vertical":return""!==this.imageV?this.imageV:d;case"disabled":return""}return""},e.decorators=[{type:n.Directive,args:[{selector:"as-split-gutter"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2}]},e.propDecorators={order:[{type:n.Input}],direction:[{type:n.Input}],useTransition:[{type:n.Input}],size:[{type:n.Input}],color:[{type:n.Input}],useBackground:[{type:n.Input}],imageH:[{type:n.Input}],imageV:[{type:n.Input}],disabled:[{type:n.Input}]},e}(),h='url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==")',d='url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC")',c=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.forChild=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[r,u,l],exports:[r,u]}]}],e}();e.AngularSplitModule=c,e.SplitComponent=r,e.SplitAreaDirective=u,e.ɵa=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-split.umd.min.js.map